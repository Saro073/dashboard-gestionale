<!DOCTYPE html>
<html>
<head>
    <title>Test Bookings Calendar</title>
    <script>
        // Script per creare dati demo nel browser console
        // Apri http://localhost:8000, fai login con admin/admin
        // Poi apri console e esegui questi comandi:
        
        function createDemoBookings() {
            console.log('Creating demo bookings...');
            
            const today = new Date();
            const bookings = [
                {
                    guestName: 'Mario Rossi',
                    guestEmail: 'mario.rossi@email.it',
                    guestPhone: '+39 123 456789',
                    checkIn: new Date(today.getFullYear(), today.getMonth(), 5).toISOString().split('T')[0],
                    checkOut: new Date(today.getFullYear(), today.getMonth(), 10).toISOString().split('T')[0],
                    guests: 2,
                    totalAmount: 750,
                    deposit: 150,
                    isPaid: true,
                    status: 'confirmed',
                    channel: 'booking',
                    notes: 'Cliente VIP'
                },
                {
                    guestName: 'Anna Bianchi',
                    guestEmail: 'anna.b@email.com',
                    guestPhone: '+39 987 654321',
                    checkIn: new Date(today.getFullYear(), today.getMonth(), 12).toISOString().split('T')[0],
                    checkOut: new Date(today.getFullYear(), today.getMonth(), 15).toISOString().split('T')[0],
                    guests: 4,
                    totalAmount: 900,
                    deposit: 200,
                    isPaid: false,
                    status: 'pending',
                    channel: 'airbnb',
                    notes: ''
                },
                {
                    guestName: 'BLOCCATO',
                    guestEmail: '',
                    guestPhone: '',
                    checkIn: new Date(today.getFullYear(), today.getMonth(), 20).toISOString().split('T')[0],
                    checkOut: new Date(today.getFullYear(), today.getMonth(), 22).toISOString().split('T')[0],
                    guests: 0,
                    totalAmount: 0,
                    deposit: 0,
                    isPaid: false,
                    status: 'blocked',
                    channel: 'direct',
                    notes: 'Manutenzione caldaia'
                },
                {
                    guestName: 'Klaus Schmidt',
                    guestEmail: 'klaus.schmidt@email.de',
                    guestPhone: '+49 123 456789',
                    checkIn: new Date(today.getFullYear(), today.getMonth(), 25).toISOString().split('T')[0],
                    checkOut: new Date(today.getFullYear(), today.getMonth(), 28).toISOString().split('T')[0],
                    guests: 2,
                    totalAmount: 600,
                    deposit: 120,
                    isPaid: true,
                    status: 'confirmed',
                    channel: 'direct',
                    notes: 'Preferisce check-in serale'
                },
                {
                    guestName: 'Laura Verdi',
                    guestEmail: 'l.verdi@email.it',
                    guestPhone: '+39 345 678901',
                    checkIn: new Date(today.getFullYear(), today.getMonth() + 1, 2).toISOString().split('T')[0],
                    checkOut: new Date(today.getFullYear(), today.getMonth() + 1, 8).toISOString().split('T')[0],
                    guests: 3,
                    totalAmount: 1200,
                    deposit: 240,
                    isPaid: true,
                    status: 'confirmed',
                    channel: 'vrbo',
                    notes: 'Arrivo con animale domestico'
                }
            ];
            
            bookings.forEach((booking, idx) => {
                const result = BookingsModule.create(booking);
                if (result.success) {
                    console.log(`✓ Booking ${idx + 1} creato:`, booking.guestName);
                } else {
                    console.error(`✗ Errore booking ${idx + 1}:`, result.message);
                }
            });
            
            console.log('Demo bookings creati! Naviga alla sezione Prenotazioni.');
            Router.navigate('bookings');
        }
        
        function clearAllBookings() {
            if (confirm('Eliminare TUTTE le prenotazioni?')) {
                localStorage.removeItem(CONFIG.STORAGE_KEYS.BOOKINGS);
                console.log('Tutte le prenotazioni eliminate.');
                location.reload();
            }
        }
        
        // Esponi funzioni globalmente
        window.createDemoBookings = createDemoBookings;
        window.clearAllBookings = clearAllBookings;
        
        console.log('Test utilities caricati. Esegui createDemoBookings() per creare dati demo.');
    </script>
</head>
<body>
    <h1>Test Bookings Calendar - Instructions</h1>
    <ol>
        <li>Apri <a href="http://localhost:8000" target="_blank">http://localhost:8000</a></li>
        <li>Login: admin / admin</li>
        <li>Apri Console (F12)</li>
        <li>Esegui: <code>createDemoBookings()</code></li>
        <li>Naviga a sezione "Prenotazioni"</li>
        <li>Verifica calendario visibile con prenotazioni colorate</li>
    </ol>
    
    <h2>Console Commands</h2>
    <ul>
        <li><code>createDemoBookings()</code> - Crea 5 prenotazioni demo</li>
        <li><code>clearAllBookings()</code> - Elimina tutte le prenotazioni</li>
        <li><code>BookingsModule.getAll()</code> - Lista tutte le prenotazioni</li>
        <li><code>Router.navigate('bookings')</code> - Vai a sezione bookings</li>
    </ul>
</body>
</html>
